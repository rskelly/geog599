<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Splines</title>
  <meta name="description" content="Splines">
  <meta name="author" content="rob">

  <!--<link rel="stylesheet" href="css/styles.css?v=1.0">-->

  <script src="pc.js"></script>
  <script src="math.js"></script>
  <script src="uav.js"></script>
  <script src="main.js"></script>

</head>

<body onload="init();">
  <form>
    <table>
      <tr>
        <td><label for="filename">File</label></td><td><select name="filename" id="filename"></select> <span id="loading"></span></td>
        <td rowspan="7" style="padding-left: 20px;">
          <p>This thing demonstrates what the forward-looking laser will see. Choose a <strong>File</strong> and click <strong>Start</strong>.</p>
          <p>The laser angle is the angle down from horizontal, in degrees. The beam angle is the spread of the beam (nominally 0.2Ëš).</p>
          <p>The light green dots are a point cloud extracted from a real lidar campaign. The laser sweeps back and forth across the swath, but the points are collapsed into a vertical plane, preserving only the y (forward) and z (vertical) dimensions.</p>
          <p>The dark green dots represent the concave hull of the accumulated point cloud. The concave hull is like the convex hull, except the length of a segment is limited by the <strong>Bin Size</strong> attribute. This is similar but not identical to an <em>alpha shape</em>.</p>
          <p>The space between the "laser frontier" and the spot directly below the UAV is the space from which the trajectory must be derived. The length of this space is dynamic and depends on the altitude of the UAV above the surface. There is no accounting for occlusion.</p>
          <p>The black dot is the UAV.</p>
        </td>
      </tr>
      <tr><td><label for="speed">Speed (m/s)</label></td><td><input name="speed" id="speed" value="4" /></td></tr>
      <tr><td><label for="altitude">Altitude</label></td><td><input id="altitude" name="altitude" onchange="update(event);" value="100" /></td></tr>
      <tr><td><label for="angle">Beam Angle (Down)</label></td><td><input id="angle" name="angle" onchange="update(event);" value="25" /></td></tr>
      <tr><td><label for="divergence">Beam Divergence</label></td><td><input id="divergence" name="divergence" onchange="update(event);" value="0.2" /></td></tr>
      <tr><td><label for="spline_alpha">Spline Alpha</label></td><td><input id="spline_alpha" name="spline_alpha" onchange="update(event);" value="0.5" /></td></tr>
      <tr><td><label for="hull_alpha">Hull Alpha</label></td><td><input id="hull_alpha" name="hull_alpha" onchange="update(event);" value="25" /></td></tr>
      <tr><td colspan="2"><button onclick="start(event);">Start</button> <button onclick="stop(event);">Stop</button></td></tr>
    </table>
  </form>
  <div style="border:1px solid #ccc">
    <canvas id="canv" width="2000" height="600" style="background-color: white"></canvas>
  </div>
</body>
</html>