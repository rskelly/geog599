# Simuation 1

This simulation represents a UAV with the following features.

## The Vehicle

The vehicle has three dynamic components:

1) a position, a vector, relative to the inertial frame
2) an orientation, a unit vector, relative to the inertial frame
3) a velocity, a vector, relative to the unit frame

As the vehicle flies, modifications are applied to it:
 
- by the environment:
	- wind, a vector, which modifies the velocity and orientation
 	- gravity, which modifies the velocity

- by the vehicle itself:
 	- thrust, which modifies the vector
 	- attitude, which modifies the orientation
 	
 ## The Gimbal 
 
 The gimbal has two dynamic components:
 
 1) a position, a vector, relative to the vehicle frame
 2) an orientation, a unit vector, relative to the vehicle frame
 
 The gimbal modifies the properties of the laser by generating a rotation 
 matrix an applying it periodically to the laser.
 
 ## The Laser
  
 The laser has two dynamic components:
 
 1) a position, a vector, relative to the gimbal frame
 2) an orientation, a unit vector, relative to the gimbal frame

These components represent the nodal point and orientation of the laser beam, not of 
the physical casing of the instrument. 
 	
A rotation matrix generated by the gimbal is periodically applied to the laser and
affects the orientation vector, which modifies the effective position of pulse returns.

## Operation

As the vehicle "flies" its control loop modifies the thrust and orientation to cause the
vehicle to follow the flight plan. The flight plan is a trajectory in three dimensions that is
continually modified in the vertical plane by the on-board computer, which uses the laser
rangefinder to compute a ground surface model and generate the vertical component of the
trajectory.

The range finder is only capable of generating time-tagged range data, and has no information
about the location from which any pulse returns. This is determined by transformations
from the laser's frame to the inertial frame as follows:

--> pulse range 
--> gimbal dynamic position + rotation 
--> gimbal static position + rotation 
--> platform frame position + rotation
--> inertial frame position + rotation
--> pulse location w/r/t inertial frame

## Simulation

The simulation requires the reading of ranges from a DEM, but the rangefinder has no knowledge of the platform or gimbal state and thus its own position or rotation relative to the terrain model. This is remedied by (conceptually) manipulating the DEM itself, and positioning it such that the pulse will "hit" it in the right place.


 
